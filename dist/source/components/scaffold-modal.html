<template>
	<require from="./scaffold-modal.css"></require>
	<ai-dialog class="container">
		<ai-dialog-body>
			<div class="row mn">
				<div class="col-xs-12 col-sm-3 pn">
					<div class="repo-popup-img-container">
						<div class="fs26 mb20">${repository.wireModel.name}</div>
						<div class="fs16 mb20 text-left hidden-xs">
							${repository.wireModel.description}
						</div>
						<a target="_blank" href.bind="repository.gitHubLink" type="button" class="btn btn-square btn-outline btn-light"><i class="fa fa-github"></i> Read More</a>
						<div class="hidden-xs">
							<button type="button" class="btn btn-block btn-primary btn-square btn-lg mt20" click.delegate="favorite()"><i class="fa fa-heart"></i> Favorite</button>
							<button type="button" class="btn btn-block btn-primary btn-square btn-lg mt20" click.delegate="sponsor()"><i class="fa fa-dollar"></i> Sponsor</button>
						</div>
						<div class="visible-xs hidden-sm">
							<button type="button" class="btn btn-primary btn-square mt20"><i class="fa fa-heart"></i> Favorite</button>
							<button type="button" class="btn btn-primary btn-square mt20"><i class="fa fa-dollar"></i> Sponsor</button>
						</div>
					</div>
					<div class="repo-popup-img" style="background-image:url('assets/img/demo-portfolio/1.jpg');"></div>
				</div>
				<div class="col-xs-12 col-sm-9 pn">
					<div id="repo-popup-steps-container">
						<div class="stepsForm sf-theme-default" style="width: 100%;height:100%">
							<div class="sf-steps hidden-xs">
								<div class="sf-steps-content text-center">
									<div class="step1" class.bind="(currentStep == ScaffoldStep.ChooseName) ? 'sf-active' : ''" click.delegate="tryChangeStep(ScaffoldStep.ChooseName)">
										<span>1</span> Repository
									</div>
									<div class="step2" class.bind="(currentStep == ScaffoldStep.EnterReplacements) ? 'sf-active' : ''" click.delegate="tryChangeStep(ScaffoldStep.EnterReplacements)">
										<span>2</span> Replacements
									</div>
									<div class="step3" class.bind="(currentStep == ScaffoldStep.Complete) ? 'sf-active' : ''" click.delegate="tryChangeStep(ScaffoldStep.Complete)">
										<span>3</span> Done
									</div>
								</div>
							</div>
							<div class="sf-steps-form sf-radius">
								<div id="app-error" if.bind="currentStep === ScaffoldStep.Error">
									<div class="message">
										<div class="text  bg-danger">
											<i class="fa fa-warning"></i> ${errorMessage}
										</div>
										<div class="text-right">
											<button type="button" class="btn btn-default ml10 btn-raised" click.delegate="reset()">OK</button>
											<a class="btn btn-default ml10 btn-raised" href="https://help.zoltu.io/" target="_blank"><i class="fa fa-envelope-o"></i> Contact Support</a>
										</div>
									</div>
								</div>
								<ul id="template-step-choose-name" class="sf-content mtn" style="height:100%" if.bind="currentStep === ScaffoldStep.ChooseName">
									<!-- form step one -->
									<li class="mbn">
										<div id="repo_name_container">
											<h3 class="br-n">Repository Name</h3>
											<hr class="primary">
											<div class="row">
												<div class="col-sm-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
													<div class="form-inline">
														<input class="form-control mb20 input-lg brr4" placeholder="vigilant-guacamole" value.bind="newRepoName"/>
														<button class="btn btn-success mb20 btn-lg btn-square" disabled.bind="!hasNewRepoName" click.delegate="repoNamed()">Next</button>
													</div>
												</div>
											</div>
										</div>
									</li>
								</ul>
								<ul id="template-step-awaiting-replacements" class="sf-content mtn" if.bind="currentStep === ScaffoldStep.AwaitingReplacements">
									<li class="mbn">
										<div id="loader_replacements">
											<i class="fa fa-refresh fa-spin"></i> Fetching Replacements...
										</div>
									</li>
								</ul>
								<ul id="template-step-enter-replacements" class="sf-content mtn" style="height:100%" if.bind="currentStep == ScaffoldStep.EnterReplacements">
									<li class="mbn">
										<div class="mt30 text-center" style="height:calc(100% - 30px)">
											<form id="form2" onsubmit="return ValidateReplacements();" style="height:100%">
												<div id="replacement_scrolling">
													<div class="row text-left">
														<div class="col-xs-12 col-sm-6 mb20" repeat.for="replacement of replacements">
															<span class="label label-primary index1" style="padding:.1em .5em">${$index + 1}</span> <label class="label1">${replacement.friendlyName}</label>
															<input class="form-control input-lg brr4 text1" value.bind="replacement.value"/>
														</div>
													</div>
												</div>
												<div class="text-right pt25  hidden-xs" style="border-top: 2px solid #ddd">
													<button type="button" class="btn btn-default btn-lg btn-square pull-left" click.delegate="tryChangeStep(ScaffoldStep.ChooseName)">Back</button>
													<span>${populatedReplacementCount}</span> out of <span class="label label-primary">${replacements.length}</span>
													<button class="btn btn-square btn-lg btn-success hidden-xs ml20" disabled.bind="!hasNewRepoName || !allReplacementsPopulated" click.delegate="createNewRepository()"><i class="fa fa-check-circle"></i> Create Repo</button>
												</div>
												<div class="pt25 pl30 pr30 visible-xs hidden-sm" style="border-top: 2px solid #ddd;">
													<div class="mb10 row">
														<div class="col-xs-6">
															<button type="button" class="btn btn-default btn-lg btn-square pull-left " onclick="ShowStep1()">Back</button>
														</div>
														<div class="col-xs-6 text-right pt10">
															<span>0</span> out of <span class="label label-primary">15</span>
														</div>
													</div>
													<button class="btn btn-square btn-block btn-lg btn-success" type="submit"><i class="fa fa-check-circle"></i> Create Repo</button>
												</div>
											</form>
										</div>
									</li>
								</ul>
								<ul id="template-step-awaiting-completion" class="sf-content" if.bind="currentStep == ScaffoldStep.AwaitingCreation">
									<li class="mbn">
										<div id="loader_replacements">
											<i class="fa fa-refresh fa-spin"></i> Creating New Repository...
										</div>
									</li>
								</ul>
								<ul id="template-step-awaiting-completion" class="sf-content" if.bind="currentStep == ScaffoldStep.Complete">
									<li class="mbn">
										<div id="loader_replacements">
											Done!
										</div>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</ai-dialog-body>
	</ai-dialog>
</template>
